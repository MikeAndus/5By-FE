{
  "last_updated_by": null,
  "last_updated_at": null,
  "nodes": {
    "FE-0": {
      "title": "React 18 + Vite + TypeScript FE scaffold with Tailwind, ShadCN primitives, routing, and /health API client",
      "completed_at": "2026-02-10T13:38:36Z",
      "contracts": {
        "typescript": {
          "ApiError": {
            "code": "string",
            "message": "string",
            "details": "unknown (optional)"
          },
          "ApiErrorResponse": {
            "error": "ApiError"
          },
          "HealthResponse": {
            "status": "'ok' | string",
            "service": "'five-by-backend' | string",
            "db": {
              "status": "'ok' | string"
            }
          }
        },
        "zod": {
          "ApiErrorSchema": {
            "code": "z.string()",
            "message": "z.string()",
            "details": "z.unknown().optional()"
          },
          "ApiErrorResponseSchema": {
            "error": "ApiErrorSchema"
          },
          "HealthResponseSchema": {
            "status": "z.string()",
            "service": "z.string()",
            "db": {
              "status": "z.string()"
            }
          }
        }
      },
      "schemas": [],
      "files_created": [
        ".env.example",
        ".eslintrc.cjs",
        ".gitignore",
        "README.md",
        "build-manifest.json",
        "components.json",
        "index.html",
        "package-lock.json",
        "package.json",
        "postcss.config.js",
        "prettier.config.cjs",
        "tailwind.config.ts",
        "tsconfig.json",
        "tsconfig.node.json",
        "vite.config.ts",
        "src/app/App.tsx",
        "src/app/router.tsx",
        "src/components/app-shell.tsx",
        "src/components/ui/button.tsx",
        "src/components/ui/card.tsx",
        "src/components/ui/sonner.tsx",
        "src/env.d.ts",
        "src/lib/api/client.ts",
        "src/lib/api/errors.ts",
        "src/lib/api/health.ts",
        "src/lib/api/types.ts",
        "src/lib/toast.ts",
        "src/lib/utils.ts",
        "src/lib/voice/stt.ts",
        "src/lib/voice/tts.ts",
        "src/main.tsx",
        "src/pages/home.tsx",
        "src/pages/not-found.tsx",
        "src/pages/session.tsx",
        "src/styles/globals.css"
      ],
      "decisions": [
        "Used npm as package manager because pnpm is unavailable in the execution environment.",
        "Used createBrowserRouter with a RootLayout that wraps all routes in AppShell.",
        "Mounted Sonner toaster globally via AppShell and centralized API error-to-toast mapping in src/lib/toast.ts.",
        "Implemented a fetch wrapper that validates success/error payloads with zod and throws ApiClientError for all failure modes.",
        "Added ShadCN-style primitives (button, card, sonner) under src/components/ui with @ alias to src."
      ],
      "environment_variables": [
        {
          "key": "VITE_API_BASE_URL",
          "description": "Base URL used by the API client for backend requests (for FE-0, GET /health)."
        }
      ],
      "enums": [],
      "response_schemas": [
        {
          "endpoint": "GET /health",
          "responses": {
            "200": {
              "status": {
                "type": "string",
                "nullable": false
              },
              "service": {
                "type": "string",
                "nullable": false
              },
              "db": {
                "type": "object",
                "nullable": false,
                "fields": {
                  "status": {
                    "type": "string",
                    "nullable": false
                  }
                }
              }
            },
            "non_2xx": {
              "error": {
                "type": "object",
                "nullable": false,
                "fields": {
                  "code": {
                    "type": "string",
                    "nullable": false
                  },
                  "message": {
                    "type": "string",
                    "nullable": false
                  },
                  "details": {
                    "type": "unknown",
                    "nullable": true,
                    "optional": true
                  }
                }
              }
            }
          }
        }
      ]
    },
    "FE-1": {
      "title": "App shell session state viewer with snapshot contract schemas and read-only session rendering",
      "completed_at": "2026-02-10T15:19:25Z",
      "contracts": {
        "typescript": {
          "Topic": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
          "SessionStatus": "\"in_progress\" | \"complete\"",
          "RevealedBy": "\"question\" | \"guess\" | \"auto\"",
          "EventType": "\"question_asked\" | \"question_answered\" | \"letter_guessed\" | \"word_guessed\"",
          "CellSnapshot": {
            "index": "number",
            "row": "number",
            "col": "number",
            "revealed": "boolean",
            "locked": "boolean",
            "letter": "string | null",
            "topics_used": "Topic[]",
            "revealed_by": "RevealedBy | null"
          },
          "PlayerSnapshot": {
            "player_number": "number",
            "name": "string | null",
            "score": "number",
            "grid_id": "string (uuid)",
            "completed": "boolean",
            "cells": "CellSnapshot[]"
          },
          "LastEvent": {
            "type": "EventType",
            "created_at": "string",
            "event_data": "Record<string, unknown>"
          },
          "SessionSnapshot": {
            "session_id": "string (uuid)",
            "status": "SessionStatus",
            "current_turn": "number",
            "topics": "Topic[]",
            "players": "[PlayerSnapshot, PlayerSnapshot]",
            "last_event": "LastEvent | null"
          },
          "getSessionSnapshot(sessionId)": "Promise<SessionSnapshot>"
        },
        "zod": {
          "TopicSchema": "z.enum([\"Politics\", \"Science\", \"History\", \"Art\", \"Current Affairs\"])",
          "SessionStatusSchema": "z.enum([\"in_progress\", \"complete\"])",
          "RevealedBySchema": "z.enum([\"question\", \"guess\", \"auto\"])",
          "EventTypeSchema": "z.enum([\"question_asked\", \"question_answered\", \"letter_guessed\", \"word_guessed\"])",
          "CellSnapshotSchema": {
            "index": "z.number().int()",
            "row": "z.number().int()",
            "col": "z.number().int()",
            "revealed": "z.boolean()",
            "locked": "z.boolean()",
            "letter": "z.string().regex(/^[A-Z]$/).nullable()",
            "topics_used": "z.array(TopicSchema)",
            "revealed_by": "RevealedBySchema.nullable()",
            "superRefine": "if revealed=false then letter and revealed_by must be null"
          },
          "PlayerSnapshotSchema": {
            "player_number": "z.number().int()",
            "name": "z.string().nullable()",
            "score": "z.number().int()",
            "grid_id": "z.string().uuid()",
            "completed": "z.boolean()",
            "cells": "z.array(CellSnapshotSchema)"
          },
          "LastEventSchema": {
            "type": "EventTypeSchema",
            "created_at": "z.string()",
            "event_data": "z.record(z.unknown())"
          },
          "SessionSnapshotSchema": {
            "session_id": "z.string().uuid()",
            "status": "SessionStatusSchema",
            "current_turn": "z.number().int()",
            "topics": "z.array(TopicSchema)",
            "players": "z.array(PlayerSnapshotSchema).length(2)",
            "last_event": "LastEventSchema.nullable()",
            "superRefine": "topics must match canonical order; player numbers unique; current_turn must exist in players"
          }
        }
      },
      "schemas": [],
      "files_created": [
        "build-manifest.json",
        "package-lock.json",
        "package.json",
        "src/components/session/active-player-cells-debug.tsx",
        "src/components/session/player-scoreboard.tsx",
        "src/components/session/session-header.tsx",
        "src/components/ui/badge.tsx",
        "src/components/ui/form.tsx",
        "src/components/ui/input.tsx",
        "src/components/ui/label.tsx",
        "src/lib/api/session-snapshot.ts",
        "src/lib/api/sessions.ts",
        "src/pages/home.tsx",
        "src/pages/session.tsx"
      ],
      "decisions": [
        "Added runtime contract validation in `SessionSnapshotSchema` with non-shape-changing `superRefine` checks for unrevealed cell invariants and canonical topic ordering.",
        "Implemented Session page as manual fetch + refresh flow using local state and `useEffect`, matching the Phase 1 no-polling requirement.",
        "Used client-side UUID validation before any session fetch and mapped `ApiClientError` codes to explicit on-page error states.",
        "Introduced minimal ShadCN-style form primitives (`form`, `input`, `label`) and wired Home join flow with react-hook-form + zod resolver."
      ],
      "environment_variables": [],
      "enums": [
        {
          "name": "Topic",
          "values": [
            "Politics",
            "Science",
            "History",
            "Art",
            "Current Affairs"
          ],
          "layers": [
            "python_db",
            "python_api",
            "zod"
          ]
        },
        {
          "name": "SessionStatus",
          "values": [
            "in_progress",
            "complete"
          ],
          "layers": [
            "python_db",
            "python_api",
            "zod"
          ]
        },
        {
          "name": "RevealedBy",
          "values": [
            "question",
            "guess",
            "auto"
          ],
          "layers": [
            "python_db",
            "python_api",
            "zod"
          ]
        },
        {
          "name": "EventType",
          "values": [
            "question_asked",
            "question_answered",
            "letter_guessed",
            "word_guessed"
          ],
          "layers": [
            "python_db",
            "python_api",
            "zod"
          ]
        }
      ],
      "response_schemas": [
        {
          "endpoint": "GET /sessions/{session_id}",
          "responses": {
            "200": {
              "session_id": {
                "type": "string (uuid)",
                "nullable": false
              },
              "status": {
                "type": "\"in_progress\" | \"complete\"",
                "nullable": false
              },
              "current_turn": {
                "type": "integer",
                "nullable": false
              },
              "topics": {
                "type": "array",
                "nullable": false,
                "items": {
                  "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                  "nullable": false
                }
              },
              "players": {
                "type": "array(length=2)",
                "nullable": false,
                "items": {
                  "type": "object",
                  "nullable": false,
                  "fields": {
                    "player_number": {
                      "type": "integer",
                      "nullable": false
                    },
                    "name": {
                      "type": "string",
                      "nullable": true
                    },
                    "score": {
                      "type": "integer",
                      "nullable": false
                    },
                    "grid_id": {
                      "type": "string (uuid)",
                      "nullable": false
                    },
                    "completed": {
                      "type": "boolean",
                      "nullable": false
                    },
                    "cells": {
                      "type": "array",
                      "nullable": false,
                      "items": {
                        "type": "object",
                        "nullable": false,
                        "fields": {
                          "index": {
                            "type": "integer",
                            "nullable": false
                          },
                          "row": {
                            "type": "integer",
                            "nullable": false
                          },
                          "col": {
                            "type": "integer",
                            "nullable": false
                          },
                          "revealed": {
                            "type": "boolean",
                            "nullable": false
                          },
                          "locked": {
                            "type": "boolean",
                            "nullable": false
                          },
                          "letter": {
                            "type": "string (^[A-Z]$)",
                            "nullable": true
                          },
                          "topics_used": {
                            "type": "array",
                            "nullable": false,
                            "items": {
                              "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                              "nullable": false
                            }
                          },
                          "revealed_by": {
                            "type": "\"question\" | \"guess\" | \"auto\"",
                            "nullable": true
                          }
                        }
                      }
                    }
                  }
                }
              },
              "last_event": {
                "type": "object",
                "nullable": true,
                "fields": {
                  "type": {
                    "type": "\"question_asked\" | \"question_answered\" | \"letter_guessed\" | \"word_guessed\"",
                    "nullable": false
                  },
                  "created_at": {
                    "type": "string",
                    "nullable": false
                  },
                  "event_data": {
                    "type": "object (record<string, unknown>)",
                    "nullable": false
                  }
                }
              }
            },
            "404": {
              "error": {
                "type": "object",
                "nullable": false,
                "fields": {
                  "code": {
                    "type": "\"session_not_found\"",
                    "nullable": false
                  },
                  "message": {
                    "type": "string",
                    "nullable": false
                  }
                }
              }
            },
            "422": {
              "error": {
                "type": "object",
                "nullable": false,
                "fields": {
                  "code": {
                    "type": "\"validation_error\"",
                    "nullable": false
                  },
                  "message": {
                    "type": "string",
                    "nullable": false
                  },
                  "details": {
                    "type": "unknown",
                    "nullable": true,
                    "optional": true
                  }
                }
              }
            }
          }
        }
      ]
    },
    "FE-2": {
      "title": "New game creation + deep-link reconnect flow with SessionSnapshot v1 contract alignment and polling refresh",
      "completed_at": "2026-02-10T17:14:32Z",
      "contracts": {
        "typescript": {
          "Topic": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
          "SessionStatus": "\"in_progress\" | \"complete\"",
          "RevealedBy": "\"question\" | \"guess\" | \"auto\"",
          "EventType": "\"question_asked\" | \"question_answered\" | \"letter_guessed\" | \"word_guessed\"",
          "CellSnapshot": {
            "index": "number (int, 0..24)",
            "row": "number (int, 0..4)",
            "col": "number (int, 0..4)",
            "revealed": "boolean",
            "locked": "boolean",
            "letter": "string (single A-Z) | null",
            "topics_used": "Topic[] (max length 5, enforced in superRefine)",
            "revealed_by": "RevealedBy | null",
            "invariants": "if revealed=false then letter=null and revealed_by=null"
          },
          "PlayerSnapshot": {
            "player_number": "1 | 2",
            "name": "string (max 30) | null",
            "score": "number (int)",
            "grid_id": "number (int)",
            "completed": "boolean",
            "cells": "CellSnapshot[]"
          },
          "LastEvent": {
            "type": "EventType",
            "created_at": "string",
            "event_data": "Record<string, unknown>"
          },
          "SessionSnapshot": {
            "session_id": "string (uuid)",
            "created_at": "string",
            "updated_at": "string",
            "status": "SessionStatus",
            "current_turn": "1 | 2",
            "topics": "Topic[] (must equal canonical list and order)",
            "players": "[PlayerSnapshot, PlayerSnapshot] (must contain player_number 1 and 2 exactly once)",
            "last_event": "LastEvent | null"
          },
          "createSession()": "Promise<SessionSnapshot>",
          "getSessionSnapshot(sessionId)": "Promise<SessionSnapshot>"
        },
        "zod": {
          "TopicSchema": "z.enum([\"Politics\", \"Science\", \"History\", \"Art\", \"Current Affairs\"])",
          "SessionStatusSchema": "z.enum([\"in_progress\", \"complete\"])",
          "RevealedBySchema": "z.enum([\"question\", \"guess\", \"auto\"])",
          "EventTypeSchema": "z.enum([\"question_asked\", \"question_answered\", \"letter_guessed\", \"word_guessed\"])",
          "CellSnapshotSchema": {
            "index": "z.number().int().min(0).max(24)",
            "row": "z.number().int().min(0).max(4)",
            "col": "z.number().int().min(0).max(4)",
            "revealed": "z.boolean()",
            "locked": "z.boolean()",
            "letter": "z.string().regex(/^[A-Z]$/).nullable()",
            "topics_used": "z.array(TopicSchema)",
            "revealed_by": "RevealedBySchema.nullable()",
            "superRefine": [
              "topics_used.length <= 5",
              "if revealed=false then letter and revealed_by must be null"
            ]
          },
          "PlayerSnapshotSchema": {
            "player_number": "z.union([z.literal(1), z.literal(2)])",
            "name": "z.string().max(30).nullable()",
            "score": "z.number().int()",
            "grid_id": "z.number().int()",
            "completed": "z.boolean()",
            "cells": "z.array(CellSnapshotSchema)"
          },
          "LastEventSchema": {
            "type": "EventTypeSchema",
            "created_at": "z.string()",
            "event_data": "z.record(z.unknown())"
          },
          "SessionSnapshotSchema": {
            "session_id": "z.string().uuid()",
            "created_at": "z.string()",
            "updated_at": "z.string()",
            "status": "SessionStatusSchema",
            "current_turn": "z.union([z.literal(1), z.literal(2)])",
            "topics": "z.array(TopicSchema)",
            "players": "z.array(PlayerSnapshotSchema).length(2)",
            "last_event": "LastEventSchema.nullable()",
            "superRefine": [
              "topics must match canonical values and order",
              "players must include player_number 1 and 2 exactly once",
              "current_turn must point to an existing player_number"
            ]
          }
        }
      },
      "schemas": [],
      "files_created": [
        "build-manifest.json",
        "src/components/session/gameplay-instructions.tsx",
        "src/components/session/player-scoreboard.tsx",
        "src/components/session/session-header.tsx",
        "src/lib/api/session-snapshot.ts",
        "src/lib/api/sessions.ts",
        "src/pages/home.tsx",
        "src/pages/session.tsx"
      ],
      "decisions": [
        "Aligned frontend runtime validation to SessionSnapshot v1 exactly so BE/FE contract mismatch surfaces as `invalid_response_shape`.",
        "Implemented `createSession()` via shared `apiRequest` without a request body to follow the optional-body POST /sessions contract.",
        "Updated Home New Game flow to create a real session, disable the CTA while in flight, and map `grids_unavailable` to a clear toast.",
        "Implemented 5-second visible-tab polling on Session page with silent failures for polling and toast-on-error for manual refresh/initial load only.",
        "Added a dedicated gameplay instructions card and kept current player highlighting driven by `current_turn`."
      ],
      "environment_variables": [],
      "enums": [
        {
          "name": "Topic",
          "values": [
            "Politics",
            "Science",
            "History",
            "Art",
            "Current Affairs"
          ],
          "layers": [
            "python_db",
            "python_api",
            "zod"
          ]
        },
        {
          "name": "SessionStatus",
          "values": [
            "in_progress",
            "complete"
          ],
          "layers": [
            "python_db",
            "python_api",
            "zod"
          ]
        },
        {
          "name": "RevealedBy",
          "values": [
            "question",
            "guess",
            "auto"
          ],
          "layers": [
            "python_db",
            "python_api",
            "zod"
          ]
        },
        {
          "name": "EventType",
          "values": [
            "question_asked",
            "question_answered",
            "letter_guessed",
            "word_guessed"
          ],
          "layers": [
            "python_db",
            "python_api",
            "zod"
          ]
        }
      ],
      "response_schemas": [
        {
          "endpoint": "POST /sessions",
          "responses": {
            "201": {
              "session_id": {
                "type": "string (uuid)",
                "nullable": false
              },
              "created_at": {
                "type": "string",
                "nullable": false
              },
              "updated_at": {
                "type": "string",
                "nullable": false
              },
              "status": {
                "type": "\"in_progress\" | \"complete\"",
                "nullable": false
              },
              "current_turn": {
                "type": "1 | 2",
                "nullable": false
              },
              "topics": {
                "type": "array",
                "nullable": false,
                "items": {
                  "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                  "nullable": false
                }
              },
              "players": {
                "type": "array(length=2)",
                "nullable": false,
                "items": {
                  "type": "object",
                  "nullable": false,
                  "fields": {
                    "player_number": {
                      "type": "1 | 2",
                      "nullable": false
                    },
                    "name": {
                      "type": "string",
                      "nullable": true
                    },
                    "score": {
                      "type": "integer",
                      "nullable": false
                    },
                    "grid_id": {
                      "type": "integer",
                      "nullable": false
                    },
                    "completed": {
                      "type": "boolean",
                      "nullable": false
                    },
                    "cells": {
                      "type": "array",
                      "nullable": false,
                      "items": {
                        "type": "object",
                        "nullable": false,
                        "fields": {
                          "index": {
                            "type": "integer",
                            "nullable": false
                          },
                          "row": {
                            "type": "integer",
                            "nullable": false
                          },
                          "col": {
                            "type": "integer",
                            "nullable": false
                          },
                          "revealed": {
                            "type": "boolean",
                            "nullable": false
                          },
                          "locked": {
                            "type": "boolean",
                            "nullable": false
                          },
                          "letter": {
                            "type": "string (^[A-Z]$)",
                            "nullable": true
                          },
                          "topics_used": {
                            "type": "array",
                            "nullable": false,
                            "items": {
                              "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                              "nullable": false
                            }
                          },
                          "revealed_by": {
                            "type": "\"question\" | \"guess\" | \"auto\"",
                            "nullable": true
                          }
                        }
                      }
                    }
                  }
                }
              },
              "last_event": {
                "type": "object",
                "nullable": true,
                "fields": {
                  "type": {
                    "type": "\"question_asked\" | \"question_answered\" | \"letter_guessed\" | \"word_guessed\"",
                    "nullable": false
                  },
                  "created_at": {
                    "type": "string",
                    "nullable": false
                  },
                  "event_data": {
                    "type": "object (record<string, unknown>)",
                    "nullable": false
                  }
                }
              }
            },
            "503": {
              "error": {
                "type": "object",
                "nullable": false,
                "fields": {
                  "code": {
                    "type": "\"grids_unavailable\"",
                    "nullable": false
                  },
                  "message": {
                    "type": "string",
                    "nullable": false
                  },
                  "details": {
                    "type": "unknown",
                    "nullable": true,
                    "optional": true
                  }
                }
              }
            }
          }
        },
        {
          "endpoint": "GET /sessions/{session_id}",
          "responses": {
            "200": {
              "session_id": {
                "type": "string (uuid)",
                "nullable": false
              },
              "created_at": {
                "type": "string",
                "nullable": false
              },
              "updated_at": {
                "type": "string",
                "nullable": false
              },
              "status": {
                "type": "\"in_progress\" | \"complete\"",
                "nullable": false
              },
              "current_turn": {
                "type": "1 | 2",
                "nullable": false
              },
              "topics": {
                "type": "array",
                "nullable": false,
                "items": {
                  "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                  "nullable": false
                }
              },
              "players": {
                "type": "array(length=2)",
                "nullable": false,
                "items": {
                  "type": "object",
                  "nullable": false,
                  "fields": {
                    "player_number": {
                      "type": "1 | 2",
                      "nullable": false
                    },
                    "name": {
                      "type": "string",
                      "nullable": true
                    },
                    "score": {
                      "type": "integer",
                      "nullable": false
                    },
                    "grid_id": {
                      "type": "integer",
                      "nullable": false
                    },
                    "completed": {
                      "type": "boolean",
                      "nullable": false
                    },
                    "cells": {
                      "type": "array",
                      "nullable": false,
                      "items": {
                        "type": "object",
                        "nullable": false,
                        "fields": {
                          "index": {
                            "type": "integer",
                            "nullable": false
                          },
                          "row": {
                            "type": "integer",
                            "nullable": false
                          },
                          "col": {
                            "type": "integer",
                            "nullable": false
                          },
                          "revealed": {
                            "type": "boolean",
                            "nullable": false
                          },
                          "locked": {
                            "type": "boolean",
                            "nullable": false
                          },
                          "letter": {
                            "type": "string (^[A-Z]$)",
                            "nullable": true
                          },
                          "topics_used": {
                            "type": "array",
                            "nullable": false,
                            "items": {
                              "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                              "nullable": false
                            }
                          },
                          "revealed_by": {
                            "type": "\"question\" | \"guess\" | \"auto\"",
                            "nullable": true
                          }
                        }
                      }
                    }
                  }
                }
              },
              "last_event": {
                "type": "object",
                "nullable": true,
                "fields": {
                  "type": {
                    "type": "\"question_asked\" | \"question_answered\" | \"letter_guessed\" | \"word_guessed\"",
                    "nullable": false
                  },
                  "created_at": {
                    "type": "string",
                    "nullable": false
                  },
                  "event_data": {
                    "type": "object (record<string, unknown>)",
                    "nullable": false
                  }
                }
              }
            },
            "404": {
              "error": {
                "type": "object",
                "nullable": false,
                "fields": {
                  "code": {
                    "type": "\"session_not_found\"",
                    "nullable": false
                  },
                  "message": {
                    "type": "string",
                    "nullable": false
                  },
                  "details": {
                    "type": "unknown",
                    "nullable": true,
                    "optional": true
                  }
                }
              }
            },
            "422": {
              "error": {
                "type": "object",
                "nullable": false,
                "fields": {
                  "code": {
                    "type": "\"validation_error\"",
                    "nullable": false
                  },
                  "message": {
                    "type": "string",
                    "nullable": false
                  },
                  "details": {
                    "type": "unknown",
                    "nullable": true,
                    "optional": true
                  }
                }
              }
            },
            "500": {
              "error": {
                "type": "object",
                "nullable": false,
                "fields": {
                  "code": {
                    "type": "\"internal_error\" | string",
                    "nullable": false
                  },
                  "message": {
                    "type": "string",
                    "nullable": false
                  },
                  "details": {
                    "type": "unknown",
                    "nullable": true,
                    "optional": true
                  }
                }
              }
            }
          }
        }
      ]
    },
    "FE-FIX-1.1": {
      "title": "Fix TS2367 status narrowing comparisons in session page",
      "completed_at": "2026-02-10T15:48:53Z",
      "files_modified": [
        "src/pages/session.tsx",
        "build-manifest.json"
      ],
      "summary": "Restructured status/snapshot guard logic into an if/else-if chain and replaced loading checks inside the error branch with a precomputed loading boolean, resolving TS2367 without changing render behavior."
    },
    "FE-3": {
      "title": "Ask flow UI (5x5 square picker + topic picker) with /ask integration and Web Speech TTS playback",
      "completed_at": "2026-02-10T19:13:10Z",
      "contracts": {
        "typescript": {
          "AskQuestionRequest": {
            "player_number": "1 | 2",
            "cell_index": "number (int, 0..24)",
            "topic": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\""
          },
          "QuestionAskedEventData": {
            "cell_index": "number (int, 0..24)",
            "row": "number (int, 0..4)",
            "col": "number (int, 0..4)",
            "topic": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
            "question_text": "string (max 500)",
            "answer": "string (min 1)",
            "acceptable_variants": "string[] (min length 1, each min 1)",
            "generator": "\"stub_v1\""
          },
          "askQuestion(sessionId, payload)": "Promise<SessionSnapshot>"
        },
        "zod": {
          "AskQuestionRequestSchema": {
            "type": "z.object({...}).strict()",
            "player_number": "z.union([z.literal(1), z.literal(2)])",
            "cell_index": "z.number().int().min(0).max(24)",
            "topic": "TopicSchema"
          },
          "QuestionAskedEventDataSchema": {
            "type": "z.object({...}).strict()",
            "cell_index": "z.number().int().min(0).max(24)",
            "row": "z.number().int().min(0).max(4)",
            "col": "z.number().int().min(0).max(4)",
            "topic": "TopicSchema",
            "question_text": "z.string().max(500)",
            "answer": "z.string().min(1)",
            "acceptable_variants": "z.array(z.string().min(1)).min(1)",
            "generator": "z.literal(\"stub_v1\")"
          }
        }
      },
      "schemas": [],
      "files_created": [
        "build-manifest.json",
        "src/components/session/ask-question-panel.tsx",
        "src/lib/api/ask.ts",
        "src/lib/api/sessions.ts",
        "src/lib/voice/tts.ts",
        "src/pages/session.tsx"
      ],
      "decisions": [
        "Kept SessionSnapshot.last_event.event_data as record<unknown> and narrowed only at point-of-use with QuestionAskedEventDataSchema.safeParse for question_asked events.",
        "Implemented ask panel as RHF+zod controlled UX validation and derived player_number from snapshot.current_turn to match backend authority.",
        "Made revealed cells non-selectable while keeping locked cells selectable with a visible lock indicator to match gameplay contract.",
        "Implemented TTS with window.speechSynthesis, cancel-before-speak behavior, and a start timeout fallback so UI status degrades cleanly when autoplay/user-gesture restrictions block speech.",
        "Triggered speech only from explicit user gestures (successful Ask submit and Repeat button) to avoid repeated audio on 5s polling refreshes."
      ],
      "environment_variables": [],
      "enums": [],
      "response_schemas": [
        {
          "endpoint": "POST /sessions/{session_id}/ask",
          "responses": {
            "200": {
              "session_id": {
                "type": "string (uuid)",
                "nullable": false
              },
              "created_at": {
                "type": "string",
                "nullable": false
              },
              "updated_at": {
                "type": "string",
                "nullable": false
              },
              "status": {
                "type": "\"in_progress\" | \"complete\"",
                "nullable": false
              },
              "current_turn": {
                "type": "1 | 2",
                "nullable": false
              },
              "topics": {
                "type": "array",
                "nullable": false,
                "items": {
                  "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                  "nullable": false
                }
              },
              "players": {
                "type": "array(length=2)",
                "nullable": false,
                "items": {
                  "type": "object",
                  "nullable": false,
                  "fields": {
                    "player_number": {
                      "type": "1 | 2",
                      "nullable": false
                    },
                    "name": {
                      "type": "string",
                      "nullable": true
                    },
                    "score": {
                      "type": "integer",
                      "nullable": false
                    },
                    "grid_id": {
                      "type": "integer",
                      "nullable": false
                    },
                    "completed": {
                      "type": "boolean",
                      "nullable": false
                    },
                    "cells": {
                      "type": "array",
                      "nullable": false,
                      "items": {
                        "type": "object",
                        "nullable": false,
                        "fields": {
                          "index": {
                            "type": "integer",
                            "nullable": false
                          },
                          "row": {
                            "type": "integer",
                            "nullable": false
                          },
                          "col": {
                            "type": "integer",
                            "nullable": false
                          },
                          "revealed": {
                            "type": "boolean",
                            "nullable": false
                          },
                          "locked": {
                            "type": "boolean",
                            "nullable": false
                          },
                          "letter": {
                            "type": "string (^[A-Z]$)",
                            "nullable": true
                          },
                          "topics_used": {
                            "type": "array",
                            "nullable": false,
                            "items": {
                              "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                              "nullable": false
                            }
                          },
                          "revealed_by": {
                            "type": "\"question\" | \"guess\" | \"auto\"",
                            "nullable": true
                          }
                        }
                      }
                    }
                  }
                }
              },
              "last_event": {
                "type": "object",
                "nullable": true,
                "fields": {
                  "type": {
                    "type": "\"question_asked\" | \"question_answered\" | \"letter_guessed\" | \"word_guessed\"",
                    "nullable": false
                  },
                  "created_at": {
                    "type": "string",
                    "nullable": false
                  },
                  "event_data": {
                    "type": "object (record<string, unknown>)",
                    "nullable": false
                  }
                }
              }
            },
            "non_2xx": {
              "error": {
                "type": "object",
                "nullable": false,
                "fields": {
                  "code": {
                    "type": "string",
                    "nullable": false
                  },
                  "message": {
                    "type": "string",
                    "nullable": false
                  },
                  "details": {
                    "type": "unknown",
                    "nullable": true,
                    "optional": true
                  }
                }
              }
            }
          }
        }
      ]
    },
    "FE-4": {
      "title": "STT answer capture with transcript correction, typed fallback, and /answer turn submission",
      "completed_at": "2026-02-10T20:15:59Z",
      "contracts": {
        "typescript": {
          "QuestionGenerator": "\"stub_v1\" | \"openai_responses_v1\"",
          "AnswerQuestionRequest": {
            "player_number": "1 | 2",
            "answer": "string (trimmed, min 1, max 100)"
          },
          "QuestionAnsweredEventData": {
            "cell_index": "number (int, 0..24)",
            "row": "number (int, 0..4)",
            "col": "number (int, 0..4)",
            "topic": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
            "answer": "string (min 1)",
            "correct": "boolean",
            "revealed_letter": "string (^[A-Z]$) | null",
            "lock_cleared_cell_index": "number (int, 0..24) | null"
          },
          "answerQuestion(sessionId, payload)": "Promise<SessionSnapshot>",
          "StartListeningOptions": {
            "lang": "string (optional, default \"en-US\")",
            "interimResults": "boolean (optional, default true)",
            "onStatus": "\"listening\" | \"stopped\" callback",
            "onInterimTranscript": "(text: string) => void",
            "onFinalTranscript": "(text: string) => void",
            "onError": "(error: { code: string; message: string }) => void"
          }
        },
        "zod": {
          "QuestionGeneratorSchema": "z.enum([\"stub_v1\", \"openai_responses_v1\"])",
          "QuestionAskedEventDataSchema.generator": "QuestionGeneratorSchema",
          "QuestionAskedEventDataSchema.question_text": "z.string().min(1).max(500)",
          "AnswerQuestionRequestSchema": {
            "type": "z.object({...}).strict()",
            "player_number": "z.union([z.literal(1), z.literal(2)])",
            "answer": "z.string().trim().min(1).max(100)"
          },
          "QuestionAnsweredEventDataSchema": {
            "type": "z.object({...}).strict().superRefine(...)",
            "cell_index": "z.number().int().min(0).max(24)",
            "row": "z.number().int().min(0).max(4)",
            "col": "z.number().int().min(0).max(4)",
            "topic": "TopicSchema",
            "answer": "z.string().min(1)",
            "correct": "z.boolean()",
            "revealed_letter": "z.string().regex(/^[A-Z]$/).nullable()",
            "lock_cleared_cell_index": "z.number().int().min(0).max(24).nullable()",
            "superRefine": [
              "if correct=true then revealed_letter must be non-null",
              "if correct=false then revealed_letter must be null"
            ]
          }
        }
      },
      "schemas": [],
      "files_created": [
        "build-manifest.json",
        "src/components/session/answer-capture-panel.tsx",
        "src/components/session/ask-question-panel.tsx",
        "src/lib/api/answer.ts",
        "src/lib/api/ask.ts",
        "src/lib/api/sessions.ts",
        "src/lib/voice/stt.ts",
        "src/types/speech-recognition.d.ts"
      ],
      "decisions": [
        "Kept answer capture backend-authoritative by deriving control gating from snapshot.last_event type and rendering correctness messaging only from question_answered event payload.",
        "Implemented STT wrapper around SpeechRecognition/webkitSpeechRecognition with no uncaught throws, stable frontend error codes, and idempotent stop behavior for mobile browser variance.",
        "Integrated AnswerCapturePanel under AskQuestionPanel so ask/repeat TTS and answer capture remain colocated while preserving existing question flow.",
        "Used zod + react-hook-form for answer input validation and reused AnswerQuestionRequestSchema answer constraints via pick({ answer: true }).",
        "Reset local STT/transcript/form state whenever question key changes (question_asked created_at) and after answer submission to prevent stale transcripts across turns."
      ],
      "environment_variables": [],
      "enums": [
        {
          "name": "QuestionGenerator",
          "values": [
            "stub_v1",
            "openai_responses_v1"
          ],
          "layers": [
            "python_api",
            "zod"
          ]
        }
      ],
      "response_schemas": [
        {
          "endpoint": "POST /sessions/{session_id}/ask",
          "responses": {
            "200": {
              "session_id": {
                "type": "string (uuid)",
                "nullable": false
              },
              "created_at": {
                "type": "string",
                "nullable": false
              },
              "updated_at": {
                "type": "string",
                "nullable": false
              },
              "status": {
                "type": "\"in_progress\" | \"complete\"",
                "nullable": false
              },
              "current_turn": {
                "type": "1 | 2",
                "nullable": false
              },
              "topics": {
                "type": "array",
                "nullable": false,
                "items": {
                  "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                  "nullable": false
                }
              },
              "players": {
                "type": "array(length=2)",
                "nullable": false
              },
              "last_event": {
                "type": "object",
                "nullable": true,
                "fields": {
                  "type": {
                    "type": "\"question_asked\" | \"question_answered\" | \"letter_guessed\" | \"word_guessed\"",
                    "nullable": false
                  },
                  "created_at": {
                    "type": "string",
                    "nullable": false
                  },
                  "event_data": {
                    "type": "object",
                    "nullable": false,
                    "fields_when_type_question_asked": {
                      "cell_index": {
                        "type": "integer (0..24)",
                        "nullable": false
                      },
                      "row": {
                        "type": "integer (0..4)",
                        "nullable": false
                      },
                      "col": {
                        "type": "integer (0..4)",
                        "nullable": false
                      },
                      "topic": {
                        "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                        "nullable": false
                      },
                      "question_text": {
                        "type": "string (1..500)",
                        "nullable": false
                      },
                      "answer": {
                        "type": "string (min 1)",
                        "nullable": false
                      },
                      "acceptable_variants": {
                        "type": "array<string>(min length 1)",
                        "nullable": false
                      },
                      "generator": {
                        "type": "\"stub_v1\" | \"openai_responses_v1\"",
                        "nullable": false
                      }
                    }
                  }
                }
              }
            },
            "non_2xx": {
              "error": {
                "type": "object",
                "nullable": false,
                "fields": {
                  "code": {
                    "type": "string",
                    "nullable": false
                  },
                  "message": {
                    "type": "string",
                    "nullable": false
                  },
                  "details": {
                    "type": "unknown",
                    "nullable": true,
                    "optional": true
                  }
                }
              }
            }
          }
        },
        {
          "endpoint": "POST /sessions/{session_id}/answer",
          "responses": {
            "200": {
              "session_id": {
                "type": "string (uuid)",
                "nullable": false
              },
              "created_at": {
                "type": "string",
                "nullable": false
              },
              "updated_at": {
                "type": "string",
                "nullable": false
              },
              "status": {
                "type": "\"in_progress\" | \"complete\"",
                "nullable": false
              },
              "current_turn": {
                "type": "1 | 2",
                "nullable": false
              },
              "topics": {
                "type": "array",
                "nullable": false,
                "items": {
                  "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                  "nullable": false
                }
              },
              "players": {
                "type": "array(length=2)",
                "nullable": false
              },
              "last_event": {
                "type": "object",
                "nullable": true,
                "fields": {
                  "type": {
                    "type": "\"question_asked\" | \"question_answered\" | \"letter_guessed\" | \"word_guessed\"",
                    "nullable": false
                  },
                  "created_at": {
                    "type": "string",
                    "nullable": false
                  },
                  "event_data": {
                    "type": "object",
                    "nullable": false,
                    "fields_when_type_question_answered": {
                      "cell_index": {
                        "type": "integer (0..24)",
                        "nullable": false
                      },
                      "row": {
                        "type": "integer (0..4)",
                        "nullable": false
                      },
                      "col": {
                        "type": "integer (0..4)",
                        "nullable": false
                      },
                      "topic": {
                        "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                        "nullable": false
                      },
                      "answer": {
                        "type": "string (min 1)",
                        "nullable": false
                      },
                      "correct": {
                        "type": "boolean",
                        "nullable": false
                      },
                      "revealed_letter": {
                        "type": "string (^[A-Z]$)",
                        "nullable": true
                      },
                      "lock_cleared_cell_index": {
                        "type": "integer (0..24)",
                        "nullable": true
                      }
                    }
                  }
                }
              }
            },
            "non_2xx": {
              "error": {
                "type": "object",
                "nullable": false,
                "fields": {
                  "code": {
                    "type": "\"out_of_turn\" | \"no_pending_question\" | \"session_not_in_progress\" | \"session_not_found\" | string",
                    "nullable": false
                  },
                  "message": {
                    "type": "string",
                    "nullable": false
                  },
                  "details": {
                    "type": "unknown",
                    "nullable": true,
                    "optional": true
                  }
                }
              }
            }
          }
        }
      ]
    },
    "FE-5": {
      "title": "Guess UX (letter/word) with confirmation flow, API integration, and result rendering",
      "completed_at": "2026-02-10T21:06:46Z",
      "contracts": {
        "typescript": {
          "GuessDirection": "\"across\" | \"down\"",
          "GuessLetterRequest": {
            "player_number": "1 | 2",
            "cell_index": "number (int, 0..24)",
            "letter": "string (regex /^[A-Za-z]$/)"
          },
          "GuessWordRequest": {
            "player_number": "1 | 2",
            "direction": "GuessDirection",
            "index": "number (int, 0..4)",
            "word": "string (regex /^[A-Za-z]{5}$/)"
          },
          "AutoRevealCell": {
            "cell_index": "number (int, 0..24)",
            "row": "number (int, 0..4)",
            "col": "number (int, 0..4)",
            "letter": "string (regex /^[A-Z]$/)"
          },
          "LetterGuessedEventData": {
            "cell_index": "number (int, 0..24)",
            "row": "number (int, 0..4)",
            "col": "number (int, 0..4)",
            "guess": "string (regex /^[A-Z]$/)",
            "correct": "boolean",
            "revealed_letter": "string (regex /^[A-Z]$/) | null",
            "score_delta": "number (int)",
            "opponent_score_delta": "number (int)",
            "locks_enqueued": "number[] (int, each 0..24)"
          },
          "WordRevealedCell": {
            "cell_index": "number (int, 0..24)",
            "row": "number (int, 0..4)",
            "col": "number (int, 0..4)",
            "letter": "string (regex /^[A-Z]$/)"
          },
          "WordGuessedEventData": {
            "direction": "GuessDirection",
            "index": "number (int, 0..4)",
            "guess": "string (regex /^[A-Z]{5}$/)",
            "correct": "boolean",
            "score_delta": "number (int)",
            "opponent_score_delta": "number (int)",
            "revealed_cells": "WordRevealedCell[]",
            "auto_reveals": "AutoRevealCell[]",
            "locks_enqueued": "number[] (int, each 0..24)"
          },
          "guessLetter(sessionId, payload)": "Promise<SessionSnapshot>",
          "guessWord(sessionId, payload)": "Promise<SessionSnapshot>"
        },
        "zod": {
          "GuessDirectionSchema": "z.enum([\"across\", \"down\"])",
          "GuessLetterRequestSchema": {
            "type": "z.object({...}).strict()",
            "player_number": "z.union([z.literal(1), z.literal(2)])",
            "cell_index": "z.number().int().min(0).max(24)",
            "letter": "z.string().regex(/^[A-Za-z]$/)"
          },
          "GuessWordRequestSchema": {
            "type": "z.object({...}).strict()",
            "player_number": "z.union([z.literal(1), z.literal(2)])",
            "direction": "GuessDirectionSchema",
            "index": "z.number().int().min(0).max(4)",
            "word": "z.string().regex(/^[A-Za-z]{5}$/)"
          },
          "AutoRevealCellSchema": {
            "type": "z.object({...}).strict()",
            "cell_index": "z.number().int().min(0).max(24)",
            "row": "z.number().int().min(0).max(4)",
            "col": "z.number().int().min(0).max(4)",
            "letter": "z.string().regex(/^[A-Z]$/)"
          },
          "LetterGuessedEventDataSchema": {
            "type": "z.object({...}).strict().superRefine(...)",
            "cell_index": "z.number().int().min(0).max(24)",
            "row": "z.number().int().min(0).max(4)",
            "col": "z.number().int().min(0).max(4)",
            "guess": "z.string().regex(/^[A-Z]$/)",
            "correct": "z.boolean()",
            "revealed_letter": "z.string().regex(/^[A-Z]$/).nullable()",
            "score_delta": "z.number().int()",
            "opponent_score_delta": "z.number().int()",
            "locks_enqueued": "z.array(z.number().int().min(0).max(24))",
            "superRefine": [
              "if correct=true then revealed_letter must be non-null",
              "if correct=false then revealed_letter must be null"
            ]
          },
          "WordRevealedCellSchema": {
            "type": "z.object({...}).strict()",
            "cell_index": "z.number().int().min(0).max(24)",
            "row": "z.number().int().min(0).max(4)",
            "col": "z.number().int().min(0).max(4)",
            "letter": "z.string().regex(/^[A-Z]$/)"
          },
          "WordGuessedEventDataSchema": {
            "type": "z.object({...}).strict()",
            "direction": "GuessDirectionSchema",
            "index": "z.number().int().min(0).max(4)",
            "guess": "z.string().regex(/^[A-Z]{5}$/)",
            "correct": "z.boolean()",
            "score_delta": "z.number().int()",
            "opponent_score_delta": "z.number().int()",
            "revealed_cells": "z.array(WordRevealedCellSchema)",
            "auto_reveals": "z.array(AutoRevealCellSchema)",
            "locks_enqueued": "z.array(z.number().int().min(0).max(24))"
          }
        }
      },
      "schemas": [],
      "files_created": [
        "build-manifest.json",
        "src/components/session/ask-question-panel.tsx",
        "src/components/session/guess-confirm-dialog.tsx",
        "src/components/session/guess-panel.tsx",
        "src/components/session/turn-panel.tsx",
        "src/lib/api/guess-events.ts",
        "src/lib/api/guess-types.ts",
        "src/lib/api/sessions.ts",
        "src/pages/session.tsx"
      ],
      "decisions": [
        "Introduced TurnPanel with local mode state (`ask` default) so Ask and Guess flows are mutually exclusive and answer capture is hidden while guessing.",
        "Kept backend authoritative: client only gates unavailable targets (revealed/locked cell checks and row/col word eligibility) and still relies on backend errors for enforcement.",
        "Implemented two RHF+zod forms (letter/word) with strict regex validation and explicit confirmation dialog before submit.",
        "Added shared speech capture controls inside GuessPanel to support voice-first input while keeping typed input available at all times.",
        "Result summaries parse `snapshot.last_event.event_data` with new guess event schemas; snapshot state remains canonical for board/scores/turn updates.",
        "Confirmation dialog closes on API error and mapped API codes are surfaced with user-facing toast copy for the FE-5 contract error set."
      ],
      "environment_variables": [],
      "enums": [
        {
          "name": "GuessDirection",
          "values": [
            "across",
            "down"
          ],
          "layers": [
            "python_api",
            "zod"
          ]
        }
      ],
      "response_schemas": [
        {
          "endpoint": "POST /sessions/{session_id}/guess-letter",
          "responses": {
            "200": {
              "session_id": {
                "type": "string (uuid)",
                "nullable": false
              },
              "created_at": {
                "type": "string",
                "nullable": false
              },
              "updated_at": {
                "type": "string",
                "nullable": false
              },
              "status": {
                "type": "\"in_progress\" | \"complete\"",
                "nullable": false
              },
              "current_turn": {
                "type": "1 | 2",
                "nullable": false
              },
              "topics": {
                "type": "array",
                "nullable": false,
                "items": {
                  "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                  "nullable": false
                }
              },
              "players": {
                "type": "array(length=2)",
                "nullable": false
              },
              "last_event": {
                "type": "object",
                "nullable": true,
                "fields": {
                  "type": {
                    "type": "\"question_asked\" | \"question_answered\" | \"letter_guessed\" | \"word_guessed\"",
                    "nullable": false
                  },
                  "created_at": {
                    "type": "string",
                    "nullable": false
                  },
                  "event_data": {
                    "type": "object",
                    "nullable": false,
                    "fields_when_type_letter_guessed": {
                      "cell_index": {
                        "type": "integer (0..24)",
                        "nullable": false
                      },
                      "row": {
                        "type": "integer (0..4)",
                        "nullable": false
                      },
                      "col": {
                        "type": "integer (0..4)",
                        "nullable": false
                      },
                      "guess": {
                        "type": "string (^[A-Z]$)",
                        "nullable": false
                      },
                      "correct": {
                        "type": "boolean",
                        "nullable": false
                      },
                      "revealed_letter": {
                        "type": "string (^[A-Z]$)",
                        "nullable": true
                      },
                      "score_delta": {
                        "type": "integer",
                        "nullable": false
                      },
                      "opponent_score_delta": {
                        "type": "integer",
                        "nullable": false
                      },
                      "locks_enqueued": {
                        "type": "array<integer (0..24)>",
                        "nullable": false
                      }
                    }
                  }
                }
              }
            },
            "non_2xx": {
              "error": {
                "type": "object",
                "nullable": false,
                "fields": {
                  "code": {
                    "type": "\"session_not_found\" | \"session_not_in_progress\" | \"out_of_turn\" | \"cell_already_revealed\" | \"cell_locked\" | \"validation_error\" | \"internal_error\" | string",
                    "nullable": false
                  },
                  "message": {
                    "type": "string",
                    "nullable": false
                  },
                  "details": {
                    "type": "unknown",
                    "nullable": true,
                    "optional": true
                  }
                }
              }
            }
          }
        },
        {
          "endpoint": "POST /sessions/{session_id}/guess-word",
          "responses": {
            "200": {
              "session_id": {
                "type": "string (uuid)",
                "nullable": false
              },
              "created_at": {
                "type": "string",
                "nullable": false
              },
              "updated_at": {
                "type": "string",
                "nullable": false
              },
              "status": {
                "type": "\"in_progress\" | \"complete\"",
                "nullable": false
              },
              "current_turn": {
                "type": "1 | 2",
                "nullable": false
              },
              "topics": {
                "type": "array",
                "nullable": false,
                "items": {
                  "type": "\"Politics\" | \"Science\" | \"History\" | \"Art\" | \"Current Affairs\"",
                  "nullable": false
                }
              },
              "players": {
                "type": "array(length=2)",
                "nullable": false
              },
              "last_event": {
                "type": "object",
                "nullable": true,
                "fields": {
                  "type": {
                    "type": "\"question_asked\" | \"question_answered\" | \"letter_guessed\" | \"word_guessed\"",
                    "nullable": false
                  },
                  "created_at": {
                    "type": "string",
                    "nullable": false
                  },
                  "event_data": {
                    "type": "object",
                    "nullable": false,
                    "fields_when_type_word_guessed": {
                      "direction": {
                        "type": "\"across\" | \"down\"",
                        "nullable": false
                      },
                      "index": {
                        "type": "integer (0..4)",
                        "nullable": false
                      },
                      "guess": {
                        "type": "string (^[A-Z]{5}$)",
                        "nullable": false
                      },
                      "correct": {
                        "type": "boolean",
                        "nullable": false
                      },
                      "score_delta": {
                        "type": "integer",
                        "nullable": false
                      },
                      "opponent_score_delta": {
                        "type": "integer",
                        "nullable": false
                      },
                      "revealed_cells": {
                        "type": "array<object>",
                        "nullable": false,
                        "item_fields": {
                          "cell_index": {
                            "type": "integer (0..24)",
                            "nullable": false
                          },
                          "row": {
                            "type": "integer (0..4)",
                            "nullable": false
                          },
                          "col": {
                            "type": "integer (0..4)",
                            "nullable": false
                          },
                          "letter": {
                            "type": "string (^[A-Z]$)",
                            "nullable": false
                          }
                        }
                      },
                      "auto_reveals": {
                        "type": "array<object>",
                        "nullable": false,
                        "item_fields": {
                          "cell_index": {
                            "type": "integer (0..24)",
                            "nullable": false
                          },
                          "row": {
                            "type": "integer (0..4)",
                            "nullable": false
                          },
                          "col": {
                            "type": "integer (0..4)",
                            "nullable": false
                          },
                          "letter": {
                            "type": "string (^[A-Z]$)",
                            "nullable": false
                          }
                        }
                      },
                      "locks_enqueued": {
                        "type": "array<integer (0..24)>",
                        "nullable": false
                      }
                    }
                  }
                }
              }
            },
            "non_2xx": {
              "error": {
                "type": "object",
                "nullable": false,
                "fields": {
                  "code": {
                    "type": "\"session_not_found\" | \"session_not_in_progress\" | \"out_of_turn\" | \"word_already_revealed\" | \"word_locked\" | \"validation_error\" | \"internal_error\" | string",
                    "nullable": false
                  },
                  "message": {
                    "type": "string",
                    "nullable": false
                  },
                  "details": {
                    "type": "unknown",
                    "nullable": true,
                    "optional": true
                  }
                }
              }
            }
          }
        }
      ]
    }
  }
}
